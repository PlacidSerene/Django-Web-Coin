// Fetch crypto data
function getData() {
  fetch(
    "https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=5&page=1&sparkline=true"
  )
    .then((response) => response.json())
    .then((data) => {
      let cryptos = data;
      let html = "";
      cryptos.forEach((crypto, i) => {
        let htmlSegment = `<tr>  
      <th scope="row">${i}</th>
      <td>
          <div>
              <img src="${crypto.image}" class='img-icon' alt="">
              ${crypto.name}
          </div>
      </td>
      <td>${crypto.current_price}</td>
      <td>${crypto.price_change_percentage_24h}</td>
      <td><a href="{% url 'login' %}"><button type="button" class="btn btn-primary">Buy</button> </a> </td>
      <td><img src='https://www.coingecko.com/coins/1/sparkline'></img></canvas></td>
  </tr>`;
        html += htmlSegment;
      });
      let container = document.querySelector("#table-item");
      container.innerHTML = html;
    });
}

getData();

// function getChart(data) {
//   const labels_data = [...Array(168).keys()];
//   const ctx = document.getElementById("myChart").getContext("2d");
//   const myChart = new Chart(ctx, {
//     type: "line",
//     data: {
//       labels: labels_data,
//       datasets: [
//         {
//           label: "",
//           data: [
//             38903.69354800599, 38920.759870100155, 39033.609267538326,
//             39181.226722053696, 39196.413431782334, 39167.147260133934,
//             39182.43542010076, 39181.76778596648, 39138.20615722545,
//             39085.711584716104, 39010.013678303454, 39007.61611379823,
//             38763.21356853998, 38537.124926437915, 38780.10115496434,
//             38879.611995933235, 38985.85822122003, 38972.21216727472,
//             38961.90074573651, 39014.20589954791, 38924.60338065078,
//             38717.46688416726, 38758.31909449219, 37951.50103815071,
//             37866.51987287414, 37842.03440281195, 38116.856109531676,
//             38067.21311384045, 38177.632038205964, 38485.734425838935,
//             38490.90170841651, 38628.789769934905, 39070.33957435782,
//             39082.313552573236, 39225.3760045802, 39113.27197780762,
//             38940.011142908734, 38817.812311117326, 38860.32636952813,
//             38939.83301805649, 38956.76435534536, 38924.80087464289,
//             38779.92970049736, 38680.634753623446, 38769.35009642774,
//             38794.24370182722, 38720.88398225874, 39539.75988759795,
//             39669.423812004505, 39520.194754821845, 38841.359493823555,
//             39001.694239225115, 38736.50003661337, 38800.90004262482,
//             38775.07389046011, 38803.13594717715, 38433.442756322474,
//             38389.02981333102, 38575.362411611655, 38671.69446010028,
//             38655.12689864263, 38839.392111292575, 38751.875843721,
//             39069.609434723716, 39015.17253019357, 39191.2071229754,
//             39278.63212502964, 39332.48071133705, 39655.77314950119,
//             39435.0379534118, 39608.121771210645, 39472.0608933335,
//             39331.84654059453, 39156.503559580015, 39431.272080337985,
//             40795.11588258226, 39088.40018399517, 39150.78116393391,
//             39279.1770750957, 39554.6825820659, 39569.37424760386,
//             40346.52773175056, 40533.32824193257, 40355.85218270206,
//             40600.39368414035, 40423.27175449897, 40588.299919297584,
//             40799.64750906399, 40663.72340980562, 40316.76188347351,
//             40413.026879882076, 39973.132720407004, 40834.46159803186,
//             41275.91165086565, 41065.77743058878, 40921.96974742411,
//             41165.63506140341, 40973.817295987625, 41062.532676072384,
//             41132.21855776482, 41068.38655421979, 41275.738744683644,
//             41091.674767873104, 40840.91002593043, 40774.90953073194,
//             40881.61609454891, 40837.826480753465, 40741.94411289332,
//             40768.230901303854, 41005.3113004114, 41071.31913134101,
//             40889.164186187474, 40925.6487071971, 40823.40714525256,
//             40840.5902231867, 40829.33756770281, 40840.78814143565,
//             40783.63682137506, 40962.70555541926, 41015.98195142964,
//             41001.70957801974, 40712.691098369716, 40590.07467511413,
//             40565.36279836173, 40563.712006534464, 40652.41274265585,
//             40799.88090728682, 40754.15562529224, 40612.63661958296,
//             40597.31477874975, 40555.73885712383, 40465.26411959411,
//             40445.755422684284, 40468.0007877402, 40590.56936572492,
//             40583.876935225344, 40929.97626940468, 41414.78786626699,
//             41656.84230583477, 41723.205287456854, 41919.13889789344,
//             41861.661476271314, 41799.410933178304, 41778.15778565683,
//             41837.41313797566, 41916.637402650435, 41781.74805111194,
//             41785.39160719793, 41803.64750056388, 41828.97174051087,
//             41760.6888335557, 41783.37894687464, 41632.696509077025,
//             41726.37197585852, 41693.74565541053, 41699.91268066034,
//             41747.247602142284, 41835.23488199481, 41766.747032085375,
//             41823.786665859385, 41974.049306458786, 42005.28015313712,
//             41905.176694056885, 42008.898642217304, 42037.48112784869,
//             42241.361850445, 42186.64634200785, 41959.42109435703,
//           ],
//           backgroundColor: [
//             "rgba(255, 99, 132, 0.2)",
//             "rgba(54, 162, 235, 0.2)",
//             "rgba(255, 206, 86, 0.2)",
//             "rgba(75, 192, 192, 0.2)",
//             "rgba(153, 102, 255, 0.2)",
//             "rgba(255, 159, 64, 0.2)",
//           ],
//           borderColor: [
//             "rgba(255, 99, 132, 1)",
//             "rgba(54, 162, 235, 1)",
//             "rgba(255, 206, 86, 1)",
//             "rgba(75, 192, 192, 1)",
//             "rgba(153, 102, 255, 1)",
//             "rgba(255, 159, 64, 1)",
//           ],
//           borderWidth: 1,
//         },
//       ],
//     },
//     options: {
//       scales: {
//         x: {
//           display: false,
//         },
//         y: {
//           display: false,
//           beginAtZero: true,
//         },
//       },
//     },
//   });
// }
